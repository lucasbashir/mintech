{% extends "network/layout.html" %}
{% block body %}

<div class="card">
<div class="card-body">
<h1> Welcome to the General Library</h1>
<hr style="border-color: white;">
<div class="library-upload">
    <p>Upload Document</p>
<form method="post" enctype="multipart/form-data" action="{% url 'upload_document' %}">
    {% csrf_token %}
    {{ doc_form.as_p }}
    <button type="submit">Upload</button>
</form>

<p>Upload Video</p>
<form method="post" enctype="multipart/form-data" action="{% url 'upload_video' %}">
    {% csrf_token %}
    {{ vid_form.as_p }}
    <button type="submit">Upload</button>
</form>
</div>

<hr style="border-color: white;">
        <h2>Categories:</h2>
        <ul>
            {% for category in categories %}
                <li><a style="color: white;" href="{% url 'category_detail' category_name=category.categoryName %}">{{ category.categoryName }}</a></li>
            {% endfor %}
        </ul>
        <hr style="border-color: white;">
        <h2>Documents</h2>
        {% for document in documents %}
            <div class="document-border">
                <p>Uploaded by {{ document.uploader.username }} on {{ document.upload_date }}</p>
                <a href="{{ document.file.url }}"><span style="color: white;">{{document.title}}</span> </a>
                <p>Times Uploaded: {{ document.uploader.librarydocument_set.count }}</p>
                    <a href="{% url 'add_to_favorites' item_id=document.id item_type='document' %}"><span style="color: white;"> Add to Favorites</span></a>
                    <button class="btn-primary" onclick="shareFile('https:\//mintechy.pythonanywhere.com{{ document.file.url }}')">Share</button>
           
            </div>
        {% endfor %} 

        <h2>Videos</h2>
        {% for video in videos %}
            <div class="video-border">
                <p>{{ video.title }} - {{ video.uploader.username }} {{ video.upload_date }}</p>
                
                <video width="400" height="240" controls>
                    <source src="{{ video.file.url }}" type="video/mp4">
                    <source src="{{ video.file.webm }}" type="video/webm">
                    <source src="{{ video.file.ogg }}" type="video/ogg">
                    Your browser does not support the video tag.
                </video>
                <p>Views: {{ video.views }}</p>
                {% if user.is_authenticated %}
                    <a href="{% url 'add_to_favorites' item_id=video.id item_type='video' %}"><span style="color: white;">Add to Favorites</span></a>
                    <button class="btn-primary" onclick="shareFile('https:\//mintechy.pythonanywhere.com{{ video.file.url }}')">Share</button>
                {% endif %}
            </div>
        {% endfor %}
<!-- Modal for Sharing -->
{% include "network/share.html" %}


   
{% endblock %}
